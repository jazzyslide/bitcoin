
<div class="main mt-5">
        
        <div class="row align-items-center">
            <div class="col-3 title p-4 ml-2">
                <h1 class="text-light m-4">通貨一覧</h1>
            </div>
            <% if user_signed_in? %>
                <div class="col-8 ">
                    <a href="" class="btn btn-outline-light" data-toggle="modal" data-target="#modalRegisterForm">新規追加</a>
                </div>
            <% end %>
        </div>
 <div class="row mx-4 justify-content-around">
    <% @coins.each do |coin| %>
    <div class="card-deck col-md-4 py-2">  
            <div class="card border-light">
                <div class="card-body text-center">
                    <% if coin.image.attached? %>
                        <%= image_tag(coin.image,:class => "img-fluid img-thumbnail") %>
                    <% elsif !coin.image_url.blank? %>
                        <%= image_tag(coin.image_url, :class => "img-fluid img-thumbnail")%>
                    <% else %>
                        <%= image_tag('noimage.png', :class => "img-fluid img-thumbnail")%>
                    <% end %>
                    
                    
                  
                </div>
                <div class="card-body">
                    <h5 class="card-title"><%= coin.name %></h5>
                    <p class="card-text"><%= coin.name_en %>(<%= coin.name %>)の説明</p>
                      
                </div>
                <div class="card-footer">
                    <%=link_to "詳細", {:controller => "coins", :action => "show", :id => coin.id}, :class => "btn btn-block btn-outline-primary" %>
                </div>
            </div>
    </div> 
    <% end %>
   
    <table class="table table-sm table-striped table-light">
        <thead>
            <tr>
                <th>ID</th>
                <th>名前</th>
                <th>シンボル</th>
                <th>価格</th>
            </tr
        </thead>
        <tbody>
            <% @coins.each do |coin| %>
            <tr>
                <td><%= coin.id %></td>
                <td><%= coin.name %></td>
                <td><%= coin.symbol %></td>
                <td><%= coin.price %></td>
                <td><%= link_to "詳細",:controller => "coins",:action => "show",:id =>  coin.id%></td>
            </tr>       
            <% end %>
        </tbody>
    </table>
    
    <%#= link_to "新規追加",:controller => "coins",:action => "new" %>
    <%#=link_to "新規追加", {:controller => "coins", :action => "new"}, :class => "btn btn-outline-primary" %>

<!--ここから-->
        <% if user_signed_in? %>
        <div class="modal fade" id="modalRegisterForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4 class="modal-title w-100 font-weight-bold">コインの新規追加</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    
                    <div class="modal-body mx-3">
                        <%= form_for @coin, :url => {:action => :create} do |form| %>
                        
                            <div class="md-form mb-5">
                               <!-- 名前 -->
                               <%= form.label :name, "名前"%>
                               <%= form.text_field :name, required: true, class: "form-control", placeholder: "例：ビットコイン"  %>
                            </div>
                             
                             <div class="md-form mb-5">  
                               <!-- 名前（英語） -->
                               <%= form.label :name_en, "名前(英語)"%>
                               <%= form.text_field :name_en, required: true, class: "form-control", placeholder: "例：Bitcoin" %>
                            </div>
                            
                            <div class="md-form mb-5">   
                               <!-- シンボル -->
                               <%= form.label :symbol, "シンボル"%>
                               <%= form.text_field :symbol, required: true, class: "form-control", placeholder: "例：BTC" %>
                            </div>
                            
                            <div class="md-form mb-5">   
                               <!-- 価格 -->
                               <%= form.label :price, "価格"%>
                               <%= form.number_field :price, required: true, class: "form-control", placeholder: "例：1000000.0" %>
                            </div>
                            
                            <div class="md-form mb-5">   
                                <%= form.label :image, "メイン画像" %>
                                <%= form.file_field :image %>
                            </div>
                            <div class="md-form mb-5">   
                               <!-- 保存ボタン -->
                               <input type = "submit" value = "保存" class="btn btn-primary btn-block">
                            </div>
                            
                        <% end %>
                     
                        
                        <% if @coin.errors.any? %>
                           <p>追加できませんでした。</p>
                           <p>エラーは<%=@coin.errors.count %>件ありました。</p>
                           <!--ここからエラーメッセージ表示-->
                           <% @coin.errors.full_messages.each do |massage|%>
                           <%= massage %>
                           <% end %>
                        <% end %>
                    </div>                   
                </div>
            </div>
        </div>
        <% end %>
<!--ここまで-->

        </div>